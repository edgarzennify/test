{"version":3,"sources":["..\\..\\./ClientApp/components/navigation/leavePage.tsx","..\\..\\./ClientApp/components/navigation/addNew.tsx"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import * as React from 'react';\r\nimport Modal from '../common/Modal';\r\nimport Button from '../common/Button';\r\n\r\nexport interface ILeavePageProps {\r\n    show: boolean,\r\n    onSaveAndContinue: any,\r\n    onContinueWithoutSaving: any,\r\n    onCancel: any,\r\n    showWithoutSavingButton?: boolean,\r\n}\r\n\r\ninterface ILeavePageState {\r\n    SaveAndContinue: boolean;\r\n}\r\n\r\nclass LeavePage extends React.Component<ILeavePageProps, ILeavePageState> {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            SaveAndContinue: false\r\n        };\r\n\r\n        this.onSaveAndContinue = this.onSaveAndContinue.bind(this);\r\n    }\r\n\r\n    onSaveAndContinue() {\r\n        this.setState({ SaveAndContinue: true });\r\n\r\n        this.props.onSaveAndContinue();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps: ILeavePageProps) {\r\n        if (!nextProps.show)\r\n            this.setState({ SaveAndContinue: false });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.show}>\r\n                <Modal.Header>\r\n                    <div className=\"description\">Leaving?</div>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    Unsaved changes have been made.\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button onClick={this.onSaveAndContinue} loading={this.state.SaveAndContinue} className=\"btn\">Save and Continue</Button>\r\n                    {this.props.showWithoutSavingButton == null || this.props.showWithoutSavingButton ? <Button onClick={this.props.onContinueWithoutSaving} disabled={this.state.SaveAndContinue} className=\"btn\">Discard and Continue</Button> : null }\r\n                    <Button onClick={this.props.onCancel} disabled={this.state.SaveAndContinue} className=\"btn\">Return</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LeavePage;\n\n\n// WEBPACK FOOTER //\n// ./ClientApp/components/navigation/leavePage.tsx","import * as React from 'react';\r\nimport Modal from '../common/Modal';\r\nimport Dropdown from '../common/Dropdown';\r\nimport Button from '../common/Button';\r\nimport Link from '../common/Link';\r\nimport { ValidationEnum } from \"../common/InputField\";\r\nimport LeavePage from \"./leavePage\";\r\ndeclare var recordJson;\r\nimport TMRepository, { ITMRepository, IResult, IModalInfo, ModalType, ISaveResponse, SaveStatus } from \"../../api/TMRepository\";\r\nimport { setStateAsync } from '../../lib/Helpers';\r\n\r\nexport interface IAddNewProps\r\n{\r\n    show: boolean,\r\n    onClose: any,\r\n    packet: any,\r\n    isDirty: boolean,\r\n    callback: any,\r\n}\r\n\r\ninterface IAddNewState\r\n{\r\n    show: boolean,\r\n    chosen: string,\r\n    showLeavePage: boolean,\r\n    isAdding: boolean,\r\n}\r\n\r\nclass AddNew extends React.Component<IAddNewProps, IAddNewState> {\r\n    private readonly _tmRepository: ITMRepository;\r\n    private readonly _addNewExclusions: string[];\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n        this._tmRepository = new TMRepository();\r\n        this.state = {\r\n            show: false,\r\n            chosen: \"\",\r\n            isAdding: false,\r\n            showLeavePage: false\r\n        }\r\n        this.onAddNew = this.onAddNew.bind(this);\r\n        this.onChangeItem = this.onChangeItem.bind(this);\r\n        this.onAddNewFinish = this.onAddNewFinish.bind(this);\r\n        this._addNewExclusions = [];\r\n        this._addNewExclusions.push(\"Lockbox\");\r\n        this._addNewExclusions.push(\"Loan, Loan/Investment Sweep\");\r\n        this._addNewExclusions.push(\"ZBA\");\r\n        this._addNewExclusions.push(\"Enterprise Automated Payables\");\r\n    }\r\n\r\n    componentDidMount()\r\n    {\r\n        this.setState({ chosen: \"\" });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps: IAddNewProps)\r\n    {\r\n        if (nextProps.show && !this.state.isAdding)\r\n        {\r\n            this.setState({ chosen: \"\" });\r\n        }\r\n        this.setState({ show: nextProps.show });\r\n    }\r\n\r\n    async onAddNew()\r\n    {\r\n        if (this.state.chosen.length > 0)\r\n        {\r\n            await setStateAsync<IAddNewState>(this, { isAdding: true });\r\n            if (this.props.isDirty)\r\n                await setStateAsync<IAddNewState>(this, { showLeavePage: true });\r\n            else\r\n                await this.onAddNewFinish();\r\n        }\r\n    }\r\n\r\n    async onAddNewFinish()\r\n    {\r\n        const callback = await this.props.callback();\r\n        if (callback)\r\n        {\r\n            recordJson[\"RecordTypeId\"] = this.state.chosen;\r\n            recordJson[\"Id\"] = null;\r\n            recordJson[\"TM_Service_Request_Packet__c\"] = this.props.packet.PacketDetail.Id;\r\n            const boot = await this._tmRepository.bootstrapEntity();\r\n            if (boot !== null)\r\n            {\r\n                await setStateAsync<IAddNewState>(this, { showLeavePage: false });\r\n                location.href = location.origin + `/${boot.Packet.Request.Id}` + \"/e\";\r\n            } else\r\n            {\r\n                await setStateAsync<IAddNewState>(this, { showLeavePage: false });\r\n            }\r\n            await setStateAsync<IAddNewState>(this, { isAdding: false });\r\n        }\r\n    }\r\n\r\n    async onChangeItem(e: any)\r\n    {\r\n        await setStateAsync<IAddNewState>(this, { chosen: e.target.value });\r\n    }\r\n\r\n    renderOptions()\r\n    {\r\n        if (this.props.packet.AllProducts === undefined)\r\n            return [];\r\n        var options: any[] = [];\r\n        options.push({ Label: \"--Choose a Product--\", Value: \"\" });\r\n        this.props.packet.AllProducts.forEach((req: any) =>\r\n        {\r\n            if (this._addNewExclusions.findIndex(x => x === req.Name) > -1 || this.props.packet.Requests.filter((x: any) => x.Name === req.Name).length === 0)\r\n            {\r\n                const option = {\r\n                    Value: req.Id,\r\n                    Label: req.Name\r\n                };\r\n                options.push(option);\r\n            }\r\n        });\r\n        return options;\r\n    }\r\n\r\n    render()\r\n    {\r\n\r\n        return (\r\n            <div>\r\n                <Modal show={this.state.show}>\r\n                    <Modal.Header>\r\n                        <div className=\"pageDescription\">Add Product</div>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <Dropdown label=\"Product\" name=\"AddNew\" onChange={this.onChangeItem} options={this.renderOptions()} selected={this.state.chosen} required={ValidationEnum.NotRequired} />\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button className=\"btn\" onClick={this.onAddNew} loading={this.state.isAdding}>Add Product</Button>\r\n                        <Button className=\"btn\" onClick={this.props.onClose} loading={this.state.isAdding}>Close</Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n                <LeavePage show={this.state.showLeavePage} onCancel={() => { this.setState({ showLeavePage: false }) }} onContinueWithoutSaving={null} onSaveAndContinue={this.onAddNewFinish} showWithoutSavingButton={false} />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddNew;\n\n\n// WEBPACK FOOTER //\n// ./ClientApp/components/navigation/addNew.tsx"],"sourceRoot":""}